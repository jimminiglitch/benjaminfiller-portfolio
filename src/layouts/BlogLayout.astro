---
interface Props {
  title: string;
  description: string;
  pubDate?: Date;
  updatedDate?: Date;
  tags?: string[];
  pageType?: 'post' | 'index';
}

const {
  title,
  description,
  pubDate,
  updatedDate,
  tags = [],
  pageType = 'post'
} = Astro.props as Props;

const canonicalUrl = Astro.site
  ? new URL(Astro.url.pathname, Astro.site).toString()
  : Astro.url.href;

const formattedPubDate = pubDate
  ? new Intl.DateTimeFormat('en-US', { dateStyle: 'long' }).format(pubDate)
  : undefined;

const formattedUpdatedDate = updatedDate
  ? new Intl.DateTimeFormat('en-US', { dateStyle: 'long' }).format(updatedDate)
  : undefined;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title}</title>
    <meta name="description" content={description} />
    {canonicalUrl && <link rel="canonical" href={canonicalUrl} />}
    <meta name="author" content="Benjamin Filler" />

    <meta property="og:type" content={pageType === 'post' ? 'article' : 'website'} />
    {canonicalUrl && <meta property="og:url" content={canonicalUrl} />}
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />

    <meta name="twitter:card" content="summary_large_image" />
    {canonicalUrl && <meta name="twitter:url" content={canonicalUrl} />}
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:creator" content="@jimminiglitch" />

    {pubDate && <meta property="article:published_time" content={pubDate.toISOString()} />}
    {updatedDate && <meta property="article:modified_time" content={updatedDate.toISOString()} />}
    {tags.map((tag) => (
      <meta property="article:tag" content={tag} />
    ))}

    <style>
      :root {
        --cyan: #00ffff;
        --magenta: #ff00ff;
        --purple: #8b5cf6;
        --dark: #0a0a0f;
        --darker: #050508;
        --light: #f8f9fa;
        --gray: #8a90a0;
        --surface-raised: rgba(16, 16, 26, 0.88);
        --surface-muted: rgba(255, 255, 255, 0.06);
        --border-glow: rgba(0, 255, 255, 0.18);
        --border-strong: rgba(255, 0, 255, 0.25);
        --shadow-soft: 0 18px 44px rgba(4, 6, 14, 0.4);
        --font-main: 'Space Grotesk', -apple-system, system-ui, sans-serif;
        --font-display: 'Archivo Black', sans-serif;
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        min-height: 100vh;
        font-family: var(--font-main);
        background: radial-gradient(circle at top, rgba(0, 255, 255, 0.12), transparent 40%),
          radial-gradient(circle at bottom, rgba(255, 0, 255, 0.08), transparent 55%),
          var(--dark);
        color: var(--light);
        line-height: 1.7;
        padding: 0 1.5rem 4rem;
      }

      a {
        color: var(--cyan);
        text-decoration: none;
        transition: color 0.2s ease, text-shadow 0.2s ease;
      }

      a:hover {
        color: var(--magenta);
        text-shadow: 0 0 12px rgba(255, 0, 255, 0.45);
      }

      .site-header {
        max-width: 1100px;
        margin: 0 auto;
        padding: 2.5rem 0 1.5rem;
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .site-brand {
        display: flex;
        align-items: center;
        gap: 0.85rem;
        font-weight: 700;
        font-size: 1.1rem;
        letter-spacing: 1px;
        text-transform: uppercase;
      }

      .brand-mark {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 44px;
        height: 44px;
        border-radius: 12px;
        border: 1px solid var(--border-glow);
        background: rgba(10, 10, 15, 0.7);
        box-shadow: 0 0 22px rgba(0, 255, 255, 0.3);
        font-family: var(--font-display);
        font-size: 1.1rem;
      }

      .site-nav {
        display: flex;
        align-items: center;
        gap: 1.25rem;
        font-size: 0.95rem;
        text-transform: uppercase;
        letter-spacing: 1.2px;
      }

      .site-nav a {
        position: relative;
      }

      .site-nav a::after {
        content: '';
        position: absolute;
        left: 0;
        bottom: -6px;
        width: 100%;
        height: 2px;
        background: linear-gradient(90deg, var(--cyan), var(--magenta));
        opacity: 0;
        transform: scaleX(0.6);
        transition: opacity 0.2s ease, transform 0.2s ease;
      }

      .site-nav a:hover::after,
      .site-nav a[aria-current="page"]::after {
        opacity: 1;
        transform: scaleX(1);
      }

      main {
        max-width: 820px;
        margin: 0 auto;
      }

      .listing-hero {
        margin-bottom: 3rem;
        padding: 2.75rem;
        border-radius: 28px;
        border: 1px solid var(--border-glow);
        background: linear-gradient(140deg, rgba(0, 255, 255, 0.12), rgba(255, 0, 255, 0.08)) rgba(10, 10, 20, 0.78);
        box-shadow: var(--shadow-soft);
      }

      .listing-hero h1 {
        font-family: var(--font-display);
        font-size: clamp(2.8rem, 6vw, 3.6rem);
        text-transform: uppercase;
        letter-spacing: 3px;
        margin-bottom: 0.6rem;
      }

      .listing-hero p {
        font-size: 1.1rem;
        color: var(--gray);
      }

      .post-header {
        margin-bottom: 2.5rem;
        padding: 2.5rem 0 1.5rem;
        border-bottom: 1px solid rgba(255, 255, 255, 0.08);
      }

      .post-title {
        font-family: var(--font-display);
        font-size: clamp(2.6rem, 5vw, 3.4rem);
        line-height: 1.15;
        text-transform: uppercase;
        letter-spacing: 2px;
        margin-bottom: 1.2rem;
      }

      .post-meta {
        display: flex;
        flex-wrap: wrap;
        gap: 1rem;
        font-size: 0.95rem;
        color: var(--gray);
        letter-spacing: 0.7px;
        text-transform: uppercase;
      }

      .tag-list {
        display: inline-flex;
        flex-wrap: wrap;
        gap: 0.6rem;
      }

      .tag-chip {
        display: inline-flex;
        align-items: center;
        gap: 0.4rem;
        padding: 0.35rem 0.85rem;
        border-radius: 999px;
        border: 1px solid rgba(255, 0, 255, 0.35);
        background: rgba(255, 0, 255, 0.12);
        color: var(--light);
        font-size: 0.75rem;
        letter-spacing: 0.6px;
      }

      .post-body {
        font-size: 1.08rem;
        color: rgba(248, 249, 250, 0.95);
      }

      .post-body p + p {
        margin-top: 1.6rem;
      }

      .post-body strong {
        color: var(--light);
      }

      .post-body em {
        color: var(--magenta);
        font-style: normal;
      }

      .post-body blockquote {
        margin: 2.4rem 0;
        padding: 1.6rem 1.8rem;
        border-left: 4px solid var(--magenta);
        background: rgba(139, 92, 246, 0.08);
        font-style: italic;
        color: rgba(248, 249, 250, 0.9);
      }

      .listing-body {
        display: grid;
        gap: 2rem;
      }

      footer {
        max-width: 820px;
        margin: 4rem auto 0;
        padding-top: 2.5rem;
        border-top: 1px solid rgba(255, 255, 255, 0.08);
        text-align: center;
        font-size: 0.9rem;
        color: rgba(200, 206, 220, 0.7);
      }

      .footer-links {
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        gap: 1rem;
        margin-bottom: 0.75rem;
      }

      @media (max-width: 768px) {
        body {
          padding: 0 1rem 3rem;
        }

        .site-header {
          flex-direction: column;
          gap: 1.5rem;
        }

        .site-nav {
          gap: 1rem;
          flex-wrap: wrap;
          justify-content: center;
        }

        .listing-hero {
          padding: 2rem;
        }

        .post-title {
          font-size: clamp(2.2rem, 8vw, 3rem);
        }
      }
    </style>
  </head>
  <body>
    <header class="site-header">
      <a class="site-brand" href="/">
        <span class="brand-mark">BF</span>
        <span>Benjamin Filler</span>
      </a>
      <nav class="site-nav" aria-label="Primary">
        <a href="/" >Home</a>
  <a href="/blog" aria-current={pageType ? 'page' : undefined}>Blog</a>
        <a href="https://jimminiglitch.github.io/bbfillerresume/" target="_blank" rel="noopener noreferrer">Résumé</a>
        <a href="https://bbfiller.com/windows/contact" target="_blank" rel="noopener noreferrer">Contact</a>
      </nav>
    </header>

    <main>
      {pageType === 'index' ? (
        <section class="listing-hero">
          <slot name="hero" />
        </section>
      ) : (
        <header class="post-header">
          <h1 class="post-title">{title}</h1>
          <p>{description}</p>
          <div class="post-meta">
            {formattedPubDate && <span>Published {formattedPubDate}</span>}
            {formattedUpdatedDate && <span>Updated {formattedUpdatedDate}</span>}
            {tags.length > 0 && (
              <span class="tag-list">
                {tags.map((tag) => (
                  <span class="tag-chip">#{tag}</span>
                ))}
              </span>
            )}
          </div>
        </header>
      )}

      {pageType === 'post' ? (
        <article class="post-body">
          <slot />
        </article>
      ) : (
        <div class="listing-body">
          <slot />
        </div>
      )}
    </main>

    <footer>
      <div class="footer-links">
        <a href="/" >Portfolio</a>
        <a href="/blog">Blog</a>
        <a href="https://bbfiller.com/windows/contact" target="_blank" rel="noopener noreferrer">Contact</a>
        <a href="https://github.com/jimminiglitch" target="_blank" rel="noopener noreferrer">GitHub</a>
      </div>
      <p>© {new Date().getFullYear()} Benjamin Filler. Crafted in Astro.</p>
    </footer>
  </body>
</html>
